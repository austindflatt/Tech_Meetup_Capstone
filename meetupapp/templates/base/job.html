{% extends 'base/main.html' %}
{% block title %} {{job.title}} - devConnect {% endblock %}
{% load static %}
{% block content %}

<table class="table table-dark table-hover">
<thead>
    <tr>
      <th scope="col">Company</th>
      <th scope="col">Job Title</th>
      <th scope="col">Location</th>
      <th scope="col">Full-Time or Part Time</th>
      <th scope="col">Remote or On Site</th>
      <th scope="col">Apply</th>
      <th scope="col">Added On</th>

    </tr>
  </thead>
  <tbody>
    <tr>
      <th scope="row">{{job.company}}</th>
      <td>{{job.title}}</td>
      <td>{{job.address}}</td>
      <td>{{job.type}}</td>
      <td>{{job.choice}}</td>
      <td><a href="{{ job.link }}" target="_blank">Apply</a></td>
      <td>{{job.created}}</td>
    </tr>
  </tbody>
</table>

<p style="color: #FFF;">{{job.description}}</p>

<hr>
 <h1 class="display-3" style="color: #FFF; ">Location</h1>

<div id='map' style='width: 100%; height: 500px; border-radius: 4px; box-shadow: rgb(0 0 0 / 22%) 0px 0px 10px;'></div>
<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiYXVzdGluZmxhdHQiLCJhIjoiY2tyb2V3Z25pMmh4eDJvbzR5YWF2a2dyZiJ9.-95eK2-4NVM6Vi_CZ8ShDA';
var map = new mapboxgl.Map({
    container: 'map', // container ID
    style: 'mapbox://styles/austinflatt/ckrofzdq15ook19nfo2nmos00', // style URL
    center: [{{ job.long }}, {{ job.lat }}], // starting position [lng, lat]
    zoom: 13 // starting zoom
});
var marker = new mapboxgl.Marker()
  .setLngLat([{{ job.long }}, {{ job.lat }}])
  .setPopup(new mapboxgl.Popup().setHTML("<h4>{{job.title}}</h4><p>Company: {{job.company}}</p><p>{{job.type}}</p><p>{{job.address}}</p>"))
  .addTo(map);

      // Add geolocate control to the map.
    map.addControl(
    new mapboxgl.GeolocateControl({
    positionOptions: {
    enableHighAccuracy: true
    },
    trackUserLocation: true
    })
    );
</script>

{% endblock content %}